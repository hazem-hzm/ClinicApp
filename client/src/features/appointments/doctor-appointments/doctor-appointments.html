<div class="space-y-6">
  <div class="flex items-center justify-between gap-4 mb-6">
    <div>
      <div class="card-title text-2xl">My appointments</div>
      <p class="text-sm opacity-80 mt-1">Manage your upcoming and past appointments.</p>
    </div>
    <a class="btn btn-ghost" routerLink="/">â† Back</a>
  </div>

  <div *ngIf="error()" class="alert alert-error mb-4">
    <span>{{ error() }}</span>
  </div>

  <div *ngIf="loading()" class="flex justify-center py-10">
    <span class="loading loading-spinner loading-lg"></span>
  </div>

  <div *ngIf="!loading()">
    <div *ngIf="appointments().length === 0" class="alert">
      <span>No appointments yet.</span>
    </div>

    <div *ngIf="appointments().length > 0" class="overflow-x-auto">
      <table class="table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Patient</th>
            <th>Status</th>
            <th class="text-right">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let a of appointments()">
            <td>
              <div class="font-semibold">{{ a.date | date: 'medium' }}</div>
            </td>
            <td>{{ a.patientName }}</td>
            <td>
              <span class="badge badge-outline">{{ a.status }}</span>
            </td>
            <td class="text-right">
              <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-sm btn-outline">
                  Update status
                </div>
                <ul
                  tabindex="0"
                  class="dropdown-content menu bg-base-200 rounded-box z-[1] w-52 p-2 shadow"
                >
                  <li *ngFor="let s of statuses">
                    <button type="button" (click)="updateStatus(a.id, s)">
                      {{ s }}
                    </button>
                  </li>
                </ul>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

